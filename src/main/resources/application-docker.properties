# Docker/Production optimized configuration for fast startup
spring.application.name=OD Management System

# Database - defaults to H2 for fastest startup, override via environment
spring.datasource.url=${SPRING_DATASOURCE_URL:jdbc:h2:mem:testdb}
spring.datasource.driver-class-name=${SPRING_DATASOURCE_DRIVER_CLASS_NAME:org.h2.Driver}
spring.datasource.username=${SPRING_DATASOURCE_USERNAME:sa}
spring.datasource.password=${SPRING_DATASOURCE_PASSWORD:}
spring.jpa.database-platform=${SPRING_JPA_DATABASE_PLATFORM:org.hibernate.dialect.H2Dialect}
spring.jpa.hibernate.ddl-auto=${SPRING_JPA_HIBERNATE_DDL_AUTO:create-drop}

# Performance optimizations
spring.jpa.show-sql=false
spring.jpa.format-sql=false
spring.jpa.properties.hibernate.jdbc.batch_size=20
spring.jpa.properties.hibernate.order_inserts=true
spring.jpa.properties.hibernate.order_updates=true

# Disable H2 console in production
spring.h2.console.enabled=false

# Server configuration
server.port=80
server.shutdown=graceful
server.compression.enabled=true
server.compression.mime-types=text/html,text/xml,text/plain,text/css,text/javascript,application/javascript,application/json

# Email configuration
spring.mail.host=${SPRING_MAIL_HOST:smtp.gmail.com}
spring.mail.port=${SPRING_MAIL_PORT:587}
spring.mail.username=${SPRING_MAIL_USERNAME:}
spring.mail.password=${SPRING_MAIL_PASSWORD:}
spring.mail.properties.mail.smtp.auth=${SPRING_MAIL_PROPERTIES_MAIL_SMTP_AUTH:true}
spring.mail.properties.mail.smtp.starttls.enable=${SPRING_MAIL_PROPERTIES_MAIL_SMTP_STARTTLS_ENABLE:true}

# Application specific
od.request.urgent-regno=${OD_REQUEST_URGENT_REGNO:URGENT-999}
app.security.dev-login.enabled=${APP_SECURITY_DEV_LOGIN_ENABLED:false}

# Minimal logging for performance
logging.level.root=WARN
logging.level.in.srmup.odms=INFO
logging.level.org.springframework.web=WARN
logging.level.org.springframework.security=WARN
logging.level.org.springframework.boot.autoconfigure=WARN
logging.pattern.console=%d{HH:mm:ss.SSS} [%thread] %-5level %logger{36} - %msg%n

# Disable unnecessary features for faster startup
spring.jmx.enabled=false
spring.backgroundpreinitializer.ignore=true
spring.main.lazy-initialization=true
spring.data.jpa.repositories.bootstrap-mode=lazy
spring.mvc.pathmatch.matching-strategy=path-pattern-parser

# Actuator configuration
management.endpoints.enabled-by-default=false
management.endpoint.health.enabled=true
management.endpoint.health.probes.enabled=true
management.health.livenessState.enabled=true
management.health.readinessState.enabled=true
management.endpoints.web.exposure.include=health
management.server.port=80
